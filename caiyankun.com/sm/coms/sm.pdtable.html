<div view-com-tpl="pdtable">
    <div class="panel panel-default">
        <div class="panel-heading">{{title}}<i class="fa pull-right expandtogle" style="cursor:pointer" set:addclass="($expand?'fa-angle-double-down!fa-angle-double-left':'fa-angle-double-left!fa-angle-double-down')"></i></div>
      <div class="panel-body" set:display='($expand?"1":"")'>
            <div view-com="table"></div>
      </div>
    </div>
</div>

<script>
    sm.view.oncominit("pdtable",function(){
        var me=this;
        this.table.toolbar.setitems("right",[
            ["fa fa-plus"],
            ["fa fa-refresh"],
            ["fa fa-save"],
        ]);
        this.table.toolbar.show=true;
        this.data({
          title:"Panel DB Table",
          expand:true,
          _container:this._el.querySelector('div.panel-body'),
        }).method({
            onrefresh:function(){
                
            },
            onsave:function(table){
                
            },
        }).watchdom({
            "i.expandtogle":function(){
                this.expand=!this.expand;
            },
            ".btn-toolbar .fa-plus@click":function(){
                this.table.onaddrow();
            },
           ".toolbar i.fa-refresh":function(){
               this.onrefresh();
           },
           ".toolbar i.fa-save":function(){
               this.onsave(this.table);
           },
        });

    });
</script>