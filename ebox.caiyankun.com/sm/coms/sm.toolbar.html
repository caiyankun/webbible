<div view-com-tpl="toolbar">

<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" set:display="($show?'1':'')">
  <div class="btn-group" role="group" aria-label="First group" set:display="($left,$left.length)">
    <button type="button" class="btn btn-default" for:="(_i,_k,_v) in left" ><i set:addclass="_v.class"></i>{{_v.text}}</button>
  </div>
  <div class="btn-group path" role="group" aria-label="First group" set:display="($path,$path.length)">
        <button type="button" class="btn btn-default" for:="(_i,_k,_v) in path"  set:addattr="($notpathend($_i)?'!disabled':'disabled')" set:addclass="($notpathend($_i)?'btn-default!btn-primary':'btn-primary!btn-default')" set:d-index="{{_i}}">{{_v}}&nbsp<i class="fa fa-angle-double-right" set:display="($notpathend($_i))"></i></button>
  </div>
  <div class="btn-group pull-right editbar" role="group" aria-label="First group" set:display="($editbar.show?'1':'')">
        <button type="button" class="btn btn-default add" set:display="editbar.add"><i class="fa fa-plus" ></i></button>
        <button type="button" class="btn btn-default upload" set:display="editbar.upload"><i class="fa fa-cloud-upload" ></i></button>
        <button type="button" class="btn btn-default download" set:display="editbar.download"><i class="fa fa-cloud-download" ></i></button>
        <button type="button" class="btn btn-default cut" set:display="editbar.cut"><i class="fa fa-cut" ></i></button>
        <button type="button" class="btn btn-default copy" set:display="editbar.copy"><i class="fa fa-copy" ></i></button>
        <button type="button" class="btn btn-default delete" set:display="editbar.delete"><i class="fa fa-trash" ></i></button>
        <button type="button" class="btn btn-default paste" set:display="editbar.paste"><i class="fa fa-paste" ></i></button>
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
        </button>
        <ul class="dropdown-menu">
            <li><a href="javascript:void(0)" class="clearclipboard">Clear Clipboard</a></li>
            <li><a href="javascript:void(0)" class="setup">Setup</a></li>
        </ul>
  </div>
  <div class="btn-group pull-right" role="group" aria-label="Second group" set:display="($right,$right.length)">
    <button type="button" class="btn btn-default" for:="(_i,_k,_v) in right" ><i set:class="_v.class"></i>{{_v.text}}</button>
  </div>
</div>

</div>


<script>
    sm.view.oncominit("toolbar",function(){
        console.log("init com: toolbar");
        this.data({
            show:true,
            left:[],
            right:[],
            path:[],
            "editbar.show":false,
            "editbar.add":false,
            "editbar.upload":true,
            "editbar.download":true,
            "editbar.cut":true,
            "editbar.copy":true,
            "editbar.paste":true,
            "editbar.delete":true,
        }).method({
            setitems:function(direction,arr=[]){
                var itemdef={class:"",text:""};
                if(direction=="right"){
                    this.right=$$.toobjarr(arr,itemdef);
                } else {
                    this.left=$$.toobjarr(arr,itemdef);
                }
            },
            putpath:function(pathstr){
                this.path=pathstr.split("/");
            },
            getpath:function(i=""){
                if(i==""){
                    return this.path.join("/");
                } 
                var rs="";
                for (var ii=0;ii<=i;ii++){
                    rs=(rs?rs+"/":"")+this.path[ii];
                }
                return rs;
            },
            notpathend:function(i){
                if(this.path.length==(i+1)) return ""
                else return "1";
            },
        }).watchdom({
            ".path button":function(e,el,ds){
                //alert(el.getAttribute("d-index"));
            },
        });
        console.log("inited com: toolbar");
    });
</script>