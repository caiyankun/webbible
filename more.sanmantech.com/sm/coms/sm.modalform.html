<div view-com-tpl="modalform">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">Modal Form!</h4>
          </div>
          <div class="modal-body">
            <table class="table" set:display="($formdata,$formdata.length)">
                <tr for:="(_i,_k,_v) in formdata"><td>{{($_v.text==""?$_v.name:$_v.text)}}ï¼š</td><td><input type="text" class="form-control " set:value="_v.value" style="width:100%" set:group="value as obj.{{_v.name}}"></td></tr>
            </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default cancel" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary ok">OK</button>
          </div>
        </div>
      </div>
    </div>
</div>
<script>
    sm.view.oncominit("modalform",function(){
        this.data({
            formdata:[],
        }).method({
            getgroupdata:function(){alert(JSON.stringify(this.formdata));},
        });
    });
    sm.dialog.modalform=function(d,cb=function(){}){
        var itemdef={name:"",value:"",text:""};
        !document.body.querySelector("#modalform")&&sm.document.create('<div view-com="modalform" id="modalform"></div>');
        sm.view.init().then(function(){
            $modalform.formdata=$$.toobjarr(d,itemdef);
            $("#modalform .modal").modal("show");
            $modalform.watchdom({
                "button.ok":function(){
                    cb.apply($modalform);
                    sm.dialog.modalform.close();
                },
            });
        });
    }
    sm.dialog.modalform.close=function(){
        !document.body.querySelector("#modalform")&&sm.document.create('<div view-com="modalform" id="modalform"></div>');
        $("#modalform .modal").modal("hide");
    }
</script>